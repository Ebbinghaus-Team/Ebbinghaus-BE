# PROMPT_PLAN.md

### 완료된 작업
- [X] 개인 공부방 & 그룹 스터디 생성 API 구현
- [X] JWT 기반 쿠키 인증 시스템 구축
- [X] 스터디 조회 및 그룹 참여 API 구현

### 이번 목표 작업
**사용자가 자신이 속한 '개인 공부방' 또는 '그룹 스터디'에 새로운 학습 문제를 등록하는 기능을 구현해야 합니다.**
문제는 총 4가지 유형(객관식, OX, 단답형, 서술형)으로 나뉘며, 각 유형마다 저장해야 할 데이터 구조가 다릅니다.

---

## 3. 상세 기획 요구사항 (Requirements)

### A. 저장 위치 식별
사용자는 문제를 생성할 때 **어디에 저장할지(Target ID)**를 지정해서 요청을 보냅니다.
- 클라이언트는 `StudyRoom ID`를 보낼 것입니다.
- 서버는 해당 ID의 스터디룸이 실제 존재하는지 확인하고, 문제를 해당 스터디룸에 연결해야 합니다.
- 동시에, 현재 로그인한 사용자(`User`)를 문제의 **출제자(Creator)**로 기록해야 합니다.

### B. 4가지 문제 유형별 처리 로직 (Polymorphism)
문제 생성 요청은 하나의 API 엔드포인트(`POST`)로 들어오지만, 내부적으로 **문제 유형(`ProblemType`)**에 따라 다르게 처리되어야 합니다.

**1. 객관식 (Multiple Choice)**
- **필수 데이터:** 질문, 해설, **선택지 목록(List)**, 정답 번호(Index)
- **로직:** 선택지 문자열들은 별도의 테이블이나 구조로 순서가 보장되게 저장되어야 합니다.

**2. O/X 퀴즈 (True/False)**
- **필수 데이터:** 질문, 해설, **정답(Boolean)**
- **로직:** 정답은 True(O)/False(X) 값으로 관리합니다.

**3. 단답형 (Short Answer)**
- **필수 데이터:** 질문, 해설, **정답 텍스트**
- **로직:** 주관식이지만 정답이 명확한 유형입니다. 텍스트로 저장합니다.

**4. 서술형 (Subjective)**
- **필수 데이터:** 질문, 해설, **모범 답안(Model Answer)**, **채점 기준 키워드 목록(Keywords)**
- **로직:**
    - 추후 AI 자동 채점을 위해 '모범 답안'과 '핵심 키워드'를 반드시 저장해야 합니다.
    - 키워드는 여러 개일 수 있으므로 리스트 형태로 관리되어야 합니다.

---

## 4. 개발 가이드 (Instruction)

위 기획 내용을 바탕으로 **문제 생성 API**를 구현해 주세요.

1. **Controller & DTO:**
    - 4가지 유형의 데이터를 모두 수용할 수 있는 유연한 Request 구조를 설계해 주세요. (하나의 통합 DTO를 쓰든, 상속 구조를 쓰든 현재 프로젝트 스타일에 맞게 가장 깔끔한 방법을 선택해 주세요.)
2. **Service & Domain:**
    - 유형별로 필요한 데이터(선택지, 키워드 등)가 누락되지 않고 연관 테이블에 잘 저장되도록 로직을 구성해 주세요.
    - 작성자(User)와 공부방(StudyRoom)의 연관 관계를 확실히 매핑해 주세요.
3. **Repository:**
    - 데이터 저장을 위한 Repository 계층을 구성해 주세요.

**현재 구현되어 있는 Entity 구조(`Problem`, `ProblemChoice`, `ProblemKeyword` 등)를 파악하여 그에 맞게 구현해 주길 바랍니다.**
